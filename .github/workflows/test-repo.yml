# Workflow to test the oolite-msys2 repository
# This is not run directly, but is called by other workflows.

# This workflow is triggered by a workflow_call event

# The workflow currently contains one job:
# - shellcheck: Runs ShellCheck to check all the bash scripts

# TODO
# Add jobs to test the workflow actions.

name: Test repository
on:
  workflow_call:
jobs:

########################################
########################################
########################################

# Run Shellcheck to lint the scripts

  shellcheck:
    name: Run ShellCheck
    runs-on: ubuntu-latest

    steps:
      - name: Checkout this repository
        uses: actions/checkout@v4

      - name: Run ShellCheck
        uses: ludeeus/action-shellcheck@master

########################################
########################################
########################################

# Test cache-built-dependency action

# Need to check what happens if the path does not exist
# Need to check what happens if the path is empty
# Need to check what happens if the path is not a directory
# Need to check what happens if the key is empty

# Need to check what happens if we want to delete the cache
# Need to check that the caching is successful

########################################
########################################
########################################

# Test early-exit-if-cache-exists action

# Need to check all inputs
# Need to check all outputs
# Need to check early exit

########################################
########################################
########################################

# Test extract-data-string-from-file action

# Need to check what happens if the path does not exist
# Need to check what happens if the path is empty
# Need to check what happens if the path is not a file
# Need to check what happens if the string is empty

########################################
########################################
########################################

# Test install-built-dependency action

# Need to check what happens if the path is empty
# Need to check what happens if the cache cannot be found
# Need to check what happens is the script cannot be found
# Need to check what happens if the script fails

########################################
########################################
########################################

# Test start-msys2=with-deps action

# Need to check what happens if the path is empty
# Need to check what happens if the path cannot be found
# Need to compare a clean install with one that has added dependencies
# Need to check what happens with multiple dependencies
# Need to check what happens with a group dependency

########################################
########################################
########################################
